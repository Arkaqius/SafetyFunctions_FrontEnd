---
import Layout from '../layouts/Layout.astro';
import { TemperatureChart } from '../components/TemperatureChart';
import TemperatureCard from '../components/TemperatureCard.astro';

const temperatureData = {
  labels: ['12:00', '13:00', '14:00', '15:00', '16:00'],
  datasets: [
    {
      label: 'Living Room',
      data: [20, 21, 22, 24, 23],
      borderColor: 'rgb(6, 182, 212)',
      tension: 0.1
    }
  ]
};

const rooms = [
  {
    name: 'Living Room',
    currentTemp: 23,
    threshold: { min: 18, max: 25 },
    forecast: 24.5,
    rateOfChange: 0.5,
    history: [
      { time: '12:00', value: 20 },
      { time: '13:00', value: 21 },
      { time: '14:00', value: 22 },
      { time: '15:00', value: 24 },
      { time: '16:00', value: 23 }
    ],
    recoveryAction: null,
    status: 'normal',
    priority: 1
  },
  {
    name: 'Bedroom',
    currentTemp: 26,
    threshold: { min: 18, max: 24 },
    forecast: 27,
    rateOfChange: 0.8,
    history: [
      { time: '12:00', value: 25 },
      { time: '13:00', value: 26 },
      { time: '14:00', value: 26.5 },
      { time: '15:00', value: 27 },
      { time: '16:00', value: 26 }
    ],
    recoveryAction: {
      title: 'Adjust AC Temperature',
      description: 'Lower AC temperature by 2Â°C',
      status: 'pending'
    },
    status: 'warning',
    priority: 2
  }
];

---

<Layout title="Temperature Monitor">
  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-gray-100 mb-8">Temperature Monitor</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      {rooms.map(room => (
        <TemperatureCard room={room} />
      ))}
    </div>

    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
      <h2 class="text-xl font-semibold mb-4">Temperature History</h2>
      <TemperatureChart client:load chartData={temperatureData} />
    </div>
  </main>
</Layout>